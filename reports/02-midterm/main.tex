\documentclass[a4paper,english,10pt,NET]{tumarticle}

% TUM packages
\usepackage{tumfonts}
\usepackage{tumarticle}
\usepackage{tumlocale}
\usepackage{tumcmd}

\usepackage{graphicx} % Required for inserting images
\usepackage[style=american]{csquotes}
\usepackage{hyperref}
\usepackage{xspace}

\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{pdflscape}

\usepackage{siunitx}
\usepackage{todo}

\usepackage{cleveref}

\usepackage{tikz}
\usepackage{messagepassing}
\usepackage{bytefield}
\usetikzlibrary{arrows.meta,calc,fit,positioning,decorations.pathmorphing,automata,shapes}
\tikzset{
	>={Stealth[scale=0.7]},
	every edge/.style={>={Stealth[scale=0.7]},draw,},
	automata/.style={
		->,
		every edge/.style={>={Stealth[scale=1.3]},font=\footnotesize,shorten >=1pt,draw,},
		font=\small,
		initial text={},
		every state/.style={draw=TUMBlue,very thick,fill=TUMLightBlue,ellipse,},
		every loop/.style={looseness=5,},
		node distance=1.8cm and 2.3cm,
	},
}

\renewcommand{\eg}{\mbox{e.\,g.}\xspace} % already defined in tumcmd but without xspace
\renewcommand{\ie}{\mbox{i.\,e.}\xspace} % already defined in tumcmd but without xspace
\newcommand{\cf}{\mbox{c.\,f.}\xspace}
\newcommand{\tos}{$\to$\xspace}

% Set document title. If no language is supplied, the document language is
% assumed.
\title{P2Psec Project -- Midterm Report}
\author{Fabio Gaiba, Lukas Heindl}
\date{July 2nd, 2024}

\begin{document}

\maketitle
\thispagestyle{tumarticle}

\section{Introduction}
% TODO(no one for now)

Let's remember the team name \textbf{Whisper2Peer} :)

\Todo{write later, summary of the rest, not strictly needed but would be nice}

\section{Changes to initial assumptions}
% TODO(Fabio)

\Todo{no substantial changes but few minor ones: no gitlab CI (see moodle), no git hooks yet}

\section{Module Architecture}
% TODO(Fabio)

\Todo{describe highlevel overview}
\begin{figure}
	\centering
	\input{figures/overview}
	\caption{A high level overview of the modules and the channels.}
	\label{fig:overview}
\end{figure}

\subsection{Logical structure}

% TODO(Lukas)
\Todo{class diagram (landscape page)}

\begin{landscape}
	\pagestyle{empty}
	\begin{figure}
		\centering
		\hspace*{-0.1\linewidth}\includegraphics[width=1.2\linewidth]{figures/class}
		\caption{Class diagram.}
		\label{fig:class:dia}
	\end{figure}
\end{landscape}

\subsection{Process architecture}
% TODO(Fabio)

\Todo{come up with scenario (reg, announce \quad|\quad notify > validation) to explain message-passing}
\Todo{figure for message types on different channels}

\begin{figure}
	\centering
	\input{figures/sequence}
	\caption{Messagepassing of one instance/scenario.}
	\label{fig:msg}
\end{figure}

% \begin{figure}
% 	\centering
% 	\input{figures/fsm_msgs}
% 	\caption{Finite state machine for message caching.}
% 	\label{fig:fsm_msgs}
% \end{figure}

threading, multi-process, ... (a lot of intersection with the classes, but I think here we can go in depth about the communication part)

\subsection{Networking} 
% TODO(Lukas)

\Todo{vertAPI (ser/deserialization) and horAPI (capnproto)}

\section{Security Measures}
% TODO(Fabio)

\Todo{not in place, but put some thought into it (PoW for participation) \tos \cf future work}

E.g secure channels between peers, sybil resistance mechanism, concurrent lookup paths in DHT protocol, . . . 

You should briefly describe the intention behind the security measure and how you want to implement it


\section{Specification of the peer-to-peer protocol}
% TODO(Lukas)

(that will be implemented)

Message formats (as given in this document)

Reasoning why the messages are needed

\subsection{capnproto}
\subsubsection{push}
\begin{table}
	\centering
	\input{figures/hzMsgs_push}
	\caption{Contents of a push packet.}
	\label{tab:push}
\end{table}
See \cref{tab:push} for reference.

\section{Future Work}
% TODO(Lukas)

\Todo{e2e testing, more strategies (like pull), \enquote{benchmarking}, \cf security measure}
\Todo{see meeting3.md}

Features you wanted to include in the implementation but couldnâ€™t finish so far

\section{Workload distribution}

% TODO(Fabio)
\Todo{Fabio: strategy (peeer programming), vertAPI (testing), main (both)}

% TODO(Lukas)
\Todo{Lukas: horAPI, vertAPI -> common (code, copy-paste from regClient), main (both)}


\todos

\end{document}
